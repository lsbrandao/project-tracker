<h1>Welcome to your projects</h1>
<mat-accordion multi="false">
  <mat-expansion-panel 
    *ngFor="let project of projects; let i=index"
    (closed)="openJournal = false">
    <mat-expansion-panel-header>
      <mat-panel-title fxLayoutAlign="start center">
        Job ID: {{ project.jobId }}
      </mat-panel-title>
      <mat-panel-description fxLayoutAlign="center center">
          Customer Name: {{project.customerName}}
      </mat-panel-description>
      <mat-panel-description fxLayoutAlign="end center">
          <div *ngFor="let comment of project.journalComments; let last = last">
              <div *ngIf="last">Last update: {{comment.date | date}}</div>
          </div>
      </mat-panel-description>
    </mat-expansion-panel-header>
    
    <ng-template matExpansionPanelContent>
      <section fxLayout.lt-md="column" fxLayoutGap="30px">
        <div fxFlex.lt-md="100%" fxFlex="400px">
          <mat-card>
              <mat-card-title fxLayoutAlign="center center">
                <h2>Job details</h2>
              </mat-card-title>
              <mat-card-content fxLayoutAlign="center center">
                  <mat-list>
                    <mat-list-item><strong>Customer Name: </strong>{{project.customerName}}</mat-list-item>
                    <mat-list-item><strong>Job ID: </strong>{{project.jobId}}</mat-list-item>
                    <mat-list-item><strong>Paper File: </strong>{{project.paperFile}}</mat-list-item>
                    <mat-list-item><strong>Claim Number: </strong>{{project.claimNumber}}</mat-list-item>
                    <mat-list-item><strong>Policy Number: </strong>{{project.policyNumber}}</mat-list-item>
                    <mat-list-item><strong>Date Received: </strong>{{project.dateReceived | date}}</mat-list-item>
                    <mat-list-item><strong>Phone Number: </strong>{{project.phoneNumber}}</mat-list-item>
                    <mat-list-item><strong>Adress: </strong>{{project.adress}}</mat-list-item>
                    <mat-list-item><strong>Insurance Company: </strong>{{project.insuranceCompany}}</mat-list-item>
                  </mat-list>
              </mat-card-content>
              <mat-card-actions fxLayoutAlign="center">
                <button mat-raised-button color="primary" (click)="openDialog(i)">Edit</button>
                <button mat-raised-button color="accent" (click)="onUpdate(i)"><mat-icon>assignment_turned_in</mat-icon>Update</button>
                <button mat-raised-button color="warn" (click)="onDelete(i)">Delete</button>
              </mat-card-actions>
          </mat-card>
        </div>
        <div fxFlexFill.lt-md fxFlex="100%" fxLayout="column" fxLayoutAlign="start" *ngIf="openJournal">
          <app-project-journal [index]="i"></app-project-journal>
        </div>
      </section>
    </ng-template>
</mat-expansion-panel>
</mat-accordion>